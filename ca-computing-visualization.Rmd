---
title: "CSEd-Refresh: A Visualization of Computing Courses in California"
output: 
  flexdashboard::flex_dashboard:
    theme: default
    orientation: columns
    vertical_layout: fill
    social: menu
    source_code: embed

---

```{r setup, include=FALSE}
library(flexdashboard)
library(leaflet)
library(dplyr)
library(DT)
library(readr)
```

#Introduction {.sidebar}
-----------------------------------------------------------------------

To the right is a visualization of all the computing courses in California. These courses are identified based on their content. 

```{r}

```


Column {data-width=650 .tabset .tabset-fade}
-----------------------------------------------------------------------

### CA Computing Courses

```{r}
courses <- read_csv("Courses.csv")
topoData <- readLines("caCountiesTopo.json") %>% paste(collapse = "\n")
qpal <- colorNumeric("RdYlBu", courses$coursecode, n = 13)

m <- leaflet(courses) %>%
  addProviderTiles("CartoDB.Positron") %>%
  setView(lng = -119.016768, lat = 36.065230, zoom = 7) %>%
  addTopoJSON(topoData, weight = 1, color = "#444444", fill = FALSE) %>%
  addCircles(~lng, ~lat, 
              popup = paste("<b>School:</b>", courses$schoolname, "<br>", 
                            "District:", courses$districtname, "<br>",
                            "Course:", courses$coursetitle, "<br>"), 
              weight = 3, radius = 40,
              color = ~qpal(coursecode), stroke = TRUE, fillOpacity = 0.8) %>%
  addLegend("bottomright", colors = c("#ffa500","#ffa800"), 
            labels = c("Intro to Computer Science","AP CSA"),
            title = "CA Computing Courses")
m
```

### Data Explorer

```{r}
courses <- read_csv("Courses.csv")

datatable(
  courses, extensions = c('Buttons', 'FixedHeader'), caption = "Data source:www.cde.gov", 
  options = list(
    dom = 'Bfrtip',
    buttons = 
      list('copy', 'print', list(
        extend = 'collection', 
        buttons = c('csv', 'excel', 'pdf'),
        text = 'Download'),
      I('colvis')
      ),
    pageLength = 50,
    fixedHeader = TRUE
  ))
```


